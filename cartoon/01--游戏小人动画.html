<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>游戏小人动画</title>
	<style>

		canvas {
			border:  2px solid pink;
		}
	</style>
</head>
<body>
	<!-- 按钮 -->
	<button class="btn">move</button>
	<!-- 画布 -->
	<canvas width="400" height="400"></canvas>

	<script>
		//获取画布
		var canvas=document.querySelector("canvas");
		//创建绘画工具
		var ctx=canvas.getContext("2d");

		var img=new Image();
			img.src="04.png";

		//图片加载完毕以后显示
		img.onload=function(){

			//获取canvas的宽和高
			var c_width=canvas.width;
			var c_height=canvas.height;

			//每个图片宽和高
			var width=this.width/4;
			var height=this.height/4;
			//开始截取的位置
				var x=y=0;
			ctx.drawImage(img,x,y,width,height,c_width/2-width/2,c_height/2-height/2,width,height);
			var i=0;
			var j=0;
			document.querySelector(".btn").onclick=function(){
				var id=setInterval(function(){

					//清空画布
					ctx.clearRect(0,0,c_width,c_height);
				
				
					i++;
					if(i<=4){
						x=(i%4)*width;
					}else {
						j++;
						y=j*height;
						i=0;
					}
					ctx.drawImage(img,x,y,width,height,c_width/2-width/2,c_height/2-height/2,width,height);
					if(i==4&&j==3){
						clearInterval(id);
					}
					console.log(1);
				},300);	
			}	
		}

	</script>
</body>
</html>